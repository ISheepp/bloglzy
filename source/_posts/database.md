---
title: 数据库理论笔记(一)
cover: https://i.loli.net/2019/09/15/YRbNZrQ9ksydlcq.jpg
categories: 数据库理论
tags:
   - 数据库
   - 理论
---
## 第一章

### 数据库（DB)
+  从本质上讲就是信息的集合
+  一般来说，数据库指数据库管理系统（DBMS)管理的数据的集合

### 数据库管理系统（DBMS）

> DBMS是一种用于建立、使用和维护数据库的系统软件。

+  数据定义语言（DDL）
+  数据操作语言（DML）
+  数据查询语言（DQL）
+  支持大容量数据的长期存储
+  具有持久性
+  支持数据共享

### 数据库系统（DBS）

>数据库系统通常由软件、数据库和数据管理员组成

+  数据库（DB）
+  数据库管理系统（DBMS）
+  数据库管理员（DBA）
+  数据库应用程序(APP)

### 数据库系统模式结构

三级模式：
+  模式：全体数据的逻辑结构和特征描述
+  外模式：局部数据的逻辑结构和特征描述
+  内模式：数据物理结构和存储方式的描述

二层映射：
+  外模式/模式映射：用来定义外模式与模式之间的对应关系，由于外模式有多个，而模式只有一个，因此，对每个外模式都有一个与之对应的外模式/模式映射
+  模式/内模式映射：用来定义模式与内模式之间的对应关系（保证数据的物理独立性

### 数据库设计步骤

+  需求收集和分析
+  概念结构设计
+  逻辑结构设计
+  物理结构设计
+  物理实现
+  数据库运行和维护

<img src="https://i.loli.net/2019/09/18/OEQYpAZelosh2Mm.png"  />

##  第二章   关系模型

### 关系的性质

+ 不能出现相同的行(即不能出现相同的元组)
+ 不能出现相同的列名
+ 列是不可分割的最小数据项
+ 可以任意交换两行列的顺序
+ 每一列的数据类型和取值范围必须一致

### 关系代数的操作

> 并、交、差、选择、投影、乘、重命名

<img src="https://i.loli.net/2019/09/18/KiPjFYnC9SABaQ5.png" style="zoom:75%;" />

### 数据模型

数据模型是现实世界数据特征的抽象，它的三个要素是

1. 数据结构——用于描述数据库对象的静态特性，包括数据的类型、内容、性质及数据之间的联系等。
2. 数据操作——用于描述数据库对象的动态特性，包括数据的插入、修改和查询等。
3. 数据的约束条件——实际上是一组完整性规则的集合，保证数据的正确、有效和相容。

> 常用的数据模型：层次模型、网状模型和关系模型。

### 关系数据模型

+ 关系：数据以一张二维表格描述
+ 属性：关系的列，是关系特征的描述
+ 模式：关系名与其属性的集合。movies(title,year,lenth,genre)
+ 元组：除属性行外，关系的每一行对应一个元组。
+ 域：属性的数据类型及取值范围。

### 关系连接运算

#### 笛卡尔积

R和S的乘运算——R×S

![](https://i.loli.net/2019/09/18/iRhkIFgbC2pL7Bc.png)

#### 自然连接

用的最多

![](https://i.loli.net/2019/09/18/1afsUxuZMlPOX56.png)

#### Theta连接

1. 先得到R和S的笛卡尔积
2. 在得到的关系中寻找满足条件c的元组
3. 新关系中包含R和S的所有属性

![](https://i.loli.net/2019/09/18/tEHDzBF1agjX9ZM.png)

### 重命名运算

![](https://i.loli.net/2019/09/21/d3FECXyp1fmLAIk.png)

### 关系上的约束

#### 实体完整性约束

+ **键(也称码)** ：关系中的某一属性或属性组的值能唯一标识一个元组，则称该属性或属性组为关系的键。
+ **候选键**：若一个关系中存在多个键，这些键统称为候选键，从候选键中选一个键作为关系的键，这个键被称为**主键**
+ **主属性**：候选键中的属性统称为主属性。

#### 参照完整性约束

**外键**：也称外码与参照关系

> 设F是关系R的一个或一组属性，但不是关系R的主键。如果F与关系S的键KS相对应（即实际意义相同），则

+ 称F是关系R的外键
+ 称关系R为参照关系
+ 称关系S为被参照关系

![](https://i.loli.net/2019/09/22/zRPB9Cq1rVWfKpc.png)

prooducerC#的取值需要参照cert#的取值。

参照完整性规则

若属性（或属性组）F是关系R的外键，它与基本关系S的主码KS相对应，则对于R中的每个元组再F上的值必须满足：

+ 或者取空值（F的每个属性均为空值）
+ 或者等于S中的某个元组的主键值

![](https://i.loli.net/2019/09/22/K7Dp4PJxa63LC9j.png)

自定义完整性

是针对某一具体要求来定义的约束条件，它反映某一具体应用所涉及的数据必须满足的语义要求。

![](https://i.loli.net/2019/09/22/xmp94rwgT1Y2kld.jpg)

执行插入操作

> **先检查实体完整性规则**：插入行主键上的值再关系中是否已经存在。若不存在，执行插入操作；否则拒绝插入。
>
> **再检查参照完整性规则**：向参照关系插入时，插入行在外键上的值是否已经在被参照关系的主键值中存在。若存在，执行插入操作；否则拒绝插入，或将插入行在外码上的值改为空值后再执行插入操作。
>
> **最后检查自定义完整性规则**：检查被插入的关系中是否有用户定义完整性规则，如果有，检查插入行再相应属性上的值是否符合用户定义完整性规则。若符合，可以执行插入操作；否则不可以。

执行删除操作，一般只需要检查参照完整性规则。

> + 如果是删除参照关系中的行，直接删除。
>
> + 如果是被删除参照关系中的行且该行没有被引用，直接删除。
>
> + 如果是被删除参照关系中的行且该行被引用，有三种操作：
>
> > + 不可以执行删除操作（拒绝删除）
> > + 或将参照关系中相应行在外键属性上的值改为空值后再执行删除操作（空值删除）
> > + 或将参照关系中相应行一起删除(级联删除)

执行修改操作时，因为修改操作可看成先执行删除操作，再执行插入操作，因此是上述两种情况的综合。

## 第三章 关系数据库设计理论

### 函数依赖

> **定义**：如果关系R的两个元组在属性A1，A2……，An上的值相同，那么他们必定在其他属性B1，B2……，Bm上的值也相同。[A决定B，或者B依赖于A]

#### 判断函数依赖

![](https://i.loli.net/2019/09/22/n5CulAqWXM3YIVe.jpg)

#### 函数依赖推论

1. 如果 C → B   C → A ;那么C → AB成立
2. C → ABC也成立

#### 关系的键

![](https://i.loli.net/2019/09/22/zWL5MVZpE48DrP6.jpg)

![](https://i.loli.net/2019/09/22/X9FVHLcpE4QenD7.jpg)

### 函数依赖的规则

1. 平凡函数依赖：B→C，且C是B的子集 ，则称B→C是**平凡**的函数依赖。
2. 非平凡函数依赖：A→B，且A与B有一部分属性重合。
3. 完全非平凡的函数依赖：A→C，且A与C没有属性重合。

#### 等价

T={A→B}，S={A→B1,A→B2}，则称T与S等价

#### 分解合并规则

A1A2A3……An→B1B2B3……Bn（合并）

A1A2A3……An→B1

A1A2A3……An→B2

A1A2A3……An→B3

……

A1A2A3……An→Bn（分解）

#### 传递规则

A→B，B→C，则A→C

#### 三大推理公理

![](https://i.loli.net/2019/09/25/VKgACn5kmiY3heR.jpg)

#### 最小基本集

+ 给定一个FD集合S，与S等价的任何FD集合都称为S的**基本集**。
+ 如果B是基本集且满足以下三个条件，则称B为**最小基本集（简称最小集）**
  1. B中所有FD的右边都是单一属性
  2. 从B中任何一个FD中删除左边的一个属性或多个属性，B不再是基本集（不存在平凡依赖）
  3. 从B中删除任何一个FD，B不再是基本集
+ 一个关系可能存在多个最小基本集

![](https://i.loli.net/2019/09/25/rzg1bqufEI3tRam.jpg)

找最小基本集步骤

![](https://i.loli.net/2019/09/25/ukQeJ9WMGhnxvpy.jpg)



### 闭包及作用

#### 属性的闭包

作用是求关系R的键和超键

![](https://i.loli.net/2019/09/25/tzWASYCTvbi1Jof.jpg)

#### 函数依赖的投影



### BC范式(BCNF)

> 关系模式R是BCNF的充要条件：每个非平凡FD的左边必定是超键

任意一个二元关系是BCNF么？（是）

假设关系R的两个属性分别是A,B，分四种情况讨论。

1. **不存在非平凡的FD**

   BCNF的条件是针对非平凡FD的，所以关系模式R是BCNF。

2. **A→B成立，但B→A不成立**

   A→B是非平凡FD，A是键，同时也是超键，符合BCNF条件。

3. **B→A成立，但A→B不成立**

   B→A是非平凡FD，B是键，同时也是超键，符合BCNF条件。

4. **A→B且B→A成立**

   A→B、B→A都是非平凡FD，A,B都是键同时也是超键，符合BCNF条件

#### 分解BCNF

![](https://i.loli.net/2019/09/26/gw4yxXEDmkbqU2e.jpg)

#### 判断是否无损连接

表格法


## 名词解释及简写汇总

+  数据库——databse——DB
+  数据库管理系统——datbase management system——DBMS
+  数据库管理员——database administrator——DBA
+  数据库应用程序——database application——APP
+  数据定义语言——data-definition language——DDL
+  数据操作语言——data-manipulation language——DML
+  数据查询语言——data-query language——DQL


## 重要单词
> atomicity 原子性  
 isolation 独立性  
 durability 持久性  
 consistency 一致性  
 tuples 元组  
 attributes 属性  
 domains 域  
 index  索引  
 buffer 缓冲区  
 union 并  
 intersection 交  
 difference 差  
 selection 选择  
 projection 投影  
 reflexivity 自反  
 augmentation 自增  
 transitivity 传递  
 redundancy 冗余  
 anomalies 异常  
 decomposing 分解  

 
